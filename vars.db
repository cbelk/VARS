--
-- PostgreSQL database dump
--

-- Dumped from database version 9.5.6
-- Dumped by pg_dump version 9.5.6

SET statement_timeout = 0;
SET lock_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: plpgsql; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


--
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';


SET search_path = public, pg_catalog;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- Name: affected; Type: TABLE; Schema: public; Owner: vars
--

CREATE TABLE affected (
    vulnid integer NOT NULL,
    sysid integer NOT NULL
);


ALTER TABLE affected OWNER TO vars;

--
-- Name: dates; Type: TABLE; Schema: public; Owner: vars
--

CREATE TABLE dates (
    vulnid integer NOT NULL,
    published date,
    initiated date NOT NULL,
    mitigated date
);


ALTER TABLE dates OWNER TO vars;

--
-- Name: docs; Type: TABLE; Schema: public; Owner: vars
--

CREATE TABLE docs (
    vulnid integer NOT NULL,
    docpath text NOT NULL,
    dockey text NOT NULL
);


ALTER TABLE docs OWNER TO vars;

--
-- Name: emp; Type: TABLE; Schema: public; Owner: vars
--

CREATE TABLE emp (
    empid integer NOT NULL,
    firstname character varying(50) NOT NULL,
    lastname character varying(50) NOT NULL,
    email text NOT NULL
);


ALTER TABLE emp OWNER TO vars;

--
-- Name: emp_empid_seq; Type: SEQUENCE; Schema: public; Owner: vars
--

CREATE SEQUENCE emp_empid_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE emp_empid_seq OWNER TO vars;

--
-- Name: emp_empid_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: vars
--

ALTER SEQUENCE emp_empid_seq OWNED BY emp.empid;


--
-- Name: exploits; Type: TABLE; Schema: public; Owner: vars
--

CREATE TABLE exploits (
    vulnid integer NOT NULL,
    exploitable boolean,
    exploit text
);


ALTER TABLE exploits OWNER TO vars;

--
-- Name: impact; Type: TABLE; Schema: public; Owner: vars
--

CREATE TABLE impact (
    vulnid integer NOT NULL,
    cvss integer NOT NULL,
    cvsslink text,
    corpscore integer NOT NULL
);


ALTER TABLE impact OWNER TO vars;

--
-- Name: ref; Type: TABLE; Schema: public; Owner: vars
--

CREATE TABLE ref (
    vulnid integer NOT NULL,
    url text NOT NULL
);


ALTER TABLE ref OWNER TO vars;

--
-- Name: systems; Type: TABLE; Schema: public; Owner: vars
--

CREATE TABLE systems (
    sysid integer NOT NULL,
    sysname text NOT NULL,
    systype text NOT NULL,
    opsys text NOT NULL,
    description text NOT NULL,
    location text NOT NULL,
    state text NOT NULL
);


ALTER TABLE systems OWNER TO vars;

--
-- Name: systems_sysid_seq; Type: SEQUENCE; Schema: public; Owner: vars
--

CREATE SEQUENCE systems_sysid_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE systems_sysid_seq OWNER TO vars;

--
-- Name: systems_sysid_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: vars
--

ALTER SEQUENCE systems_sysid_seq OWNED BY systems.sysid;


--
-- Name: tickets; Type: TABLE; Schema: public; Owner: vars
--

CREATE TABLE tickets (
    vulnid integer NOT NULL,
    ticket integer NOT NULL
);


ALTER TABLE tickets OWNER TO vars;

--
-- Name: vuln; Type: TABLE; Schema: public; Owner: vars
--

CREATE TABLE vuln (
    vulnid integer NOT NULL,
    vulnname text NOT NULL,
    cve character varying(25),
    finder integer NOT NULL,
    initiator integer NOT NULL,
    summary text NOT NULL,
    test text NOT NULL,
    mitigation text NOT NULL
);


ALTER TABLE vuln OWNER TO vars;

--
-- Name: vuln_vulnid_seq; Type: SEQUENCE; Schema: public; Owner: vars
--

CREATE SEQUENCE vuln_vulnid_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE vuln_vulnid_seq OWNER TO vars;

--
-- Name: vuln_vulnid_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: vars
--

ALTER SEQUENCE vuln_vulnid_seq OWNED BY vuln.vulnid;


--
-- Name: empid; Type: DEFAULT; Schema: public; Owner: vars
--

ALTER TABLE ONLY emp ALTER COLUMN empid SET DEFAULT nextval('emp_empid_seq'::regclass);


--
-- Name: sysid; Type: DEFAULT; Schema: public; Owner: vars
--

ALTER TABLE ONLY systems ALTER COLUMN sysid SET DEFAULT nextval('systems_sysid_seq'::regclass);


--
-- Name: vulnid; Type: DEFAULT; Schema: public; Owner: vars
--

ALTER TABLE ONLY vuln ALTER COLUMN vulnid SET DEFAULT nextval('vuln_vulnid_seq'::regclass);


--
-- Name: affected_pkey; Type: CONSTRAINT; Schema: public; Owner: vars
--

ALTER TABLE ONLY affected
    ADD CONSTRAINT affected_pkey PRIMARY KEY (vulnid, sysid);


--
-- Name: dates_pkey; Type: CONSTRAINT; Schema: public; Owner: vars
--

ALTER TABLE ONLY dates
    ADD CONSTRAINT dates_pkey PRIMARY KEY (vulnid);


--
-- Name: docs_pkey; Type: CONSTRAINT; Schema: public; Owner: vars
--

ALTER TABLE ONLY docs
    ADD CONSTRAINT docs_pkey PRIMARY KEY (vulnid, docpath);


--
-- Name: emp_pkey; Type: CONSTRAINT; Schema: public; Owner: vars
--

ALTER TABLE ONLY emp
    ADD CONSTRAINT emp_pkey PRIMARY KEY (empid);


--
-- Name: exploits_pkey; Type: CONSTRAINT; Schema: public; Owner: vars
--

ALTER TABLE ONLY exploits
    ADD CONSTRAINT exploits_pkey PRIMARY KEY (vulnid);


--
-- Name: impact_pkey; Type: CONSTRAINT; Schema: public; Owner: vars
--

ALTER TABLE ONLY impact
    ADD CONSTRAINT impact_pkey PRIMARY KEY (vulnid);


--
-- Name: ref_pkey; Type: CONSTRAINT; Schema: public; Owner: vars
--

ALTER TABLE ONLY ref
    ADD CONSTRAINT ref_pkey PRIMARY KEY (vulnid, url);


--
-- Name: systems_pkey; Type: CONSTRAINT; Schema: public; Owner: vars
--

ALTER TABLE ONLY systems
    ADD CONSTRAINT systems_pkey PRIMARY KEY (sysid);


--
-- Name: tickets_pkey; Type: CONSTRAINT; Schema: public; Owner: vars
--

ALTER TABLE ONLY tickets
    ADD CONSTRAINT tickets_pkey PRIMARY KEY (vulnid, ticket);


--
-- Name: vuln_pkey; Type: CONSTRAINT; Schema: public; Owner: vars
--

ALTER TABLE ONLY vuln
    ADD CONSTRAINT vuln_pkey PRIMARY KEY (vulnid);


--
-- Name: affected_sysid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: vars
--

ALTER TABLE ONLY affected
    ADD CONSTRAINT affected_sysid_fkey FOREIGN KEY (sysid) REFERENCES systems(sysid);


--
-- Name: affected_vulnid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: vars
--

ALTER TABLE ONLY affected
    ADD CONSTRAINT affected_vulnid_fkey FOREIGN KEY (vulnid) REFERENCES vuln(vulnid);


--
-- Name: dates_vulnid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: vars
--

ALTER TABLE ONLY dates
    ADD CONSTRAINT dates_vulnid_fkey FOREIGN KEY (vulnid) REFERENCES vuln(vulnid);


--
-- Name: docs_vulnid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: vars
--

ALTER TABLE ONLY docs
    ADD CONSTRAINT docs_vulnid_fkey FOREIGN KEY (vulnid) REFERENCES vuln(vulnid);


--
-- Name: exploits_vulnid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: vars
--

ALTER TABLE ONLY exploits
    ADD CONSTRAINT exploits_vulnid_fkey FOREIGN KEY (vulnid) REFERENCES vuln(vulnid);


--
-- Name: impact_vulnid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: vars
--

ALTER TABLE ONLY impact
    ADD CONSTRAINT impact_vulnid_fkey FOREIGN KEY (vulnid) REFERENCES vuln(vulnid);


--
-- Name: ref_vulnid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: vars
--

ALTER TABLE ONLY ref
    ADD CONSTRAINT ref_vulnid_fkey FOREIGN KEY (vulnid) REFERENCES vuln(vulnid);


--
-- Name: tickets_vulnid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: vars
--

ALTER TABLE ONLY tickets
    ADD CONSTRAINT tickets_vulnid_fkey FOREIGN KEY (vulnid) REFERENCES vuln(vulnid);


--
-- Name: vuln_finder_fkey; Type: FK CONSTRAINT; Schema: public; Owner: vars
--

ALTER TABLE ONLY vuln
    ADD CONSTRAINT vuln_finder_fkey FOREIGN KEY (finder) REFERENCES emp(empid);


--
-- Name: vuln_initiator_fkey; Type: FK CONSTRAINT; Schema: public; Owner: vars
--

ALTER TABLE ONLY vuln
    ADD CONSTRAINT vuln_initiator_fkey FOREIGN KEY (initiator) REFERENCES emp(empid);


--
-- Name: public; Type: ACL; Schema: -; Owner: postgres
--

REVOKE ALL ON SCHEMA public FROM PUBLIC;
REVOKE ALL ON SCHEMA public FROM postgres;
GRANT ALL ON SCHEMA public TO postgres;
GRANT ALL ON SCHEMA public TO PUBLIC;


--
-- PostgreSQL database dump complete
--

